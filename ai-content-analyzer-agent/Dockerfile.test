FROM python:3.9-slim

WORKDIR /app

ENV PYTHONPATH=/app/src

COPY requirements.txt .

RUN pip install --no-cache-dir -r requirements.txt

RUN pip install --no-cache-dir pytest pytest-asyncio httpx

COPY src/ ./src/
COPY config/ ./config/
COPY tests/ ./tests/

CMD ["pytest", "--maxfail=1", "--disable-warnings", "-q"]